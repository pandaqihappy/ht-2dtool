!function(D,l){"use strict";var h="ht",k=D[h],t="position",K="absolute",e="px",V="left",G="top",I="innerHTML",w="className",$="width",o="height",y="0",r="display",A="none",N="visibility",C="user-select",Z="margin",x="padding",Q=null,S=k.Color,c=k.Default,J=c.getInternal(),R=D.setTimeout,E=D.setInterval,d=D.clearTimeout,m=D.clearInterval,T=D.parseInt,s=c.isLeftButton,p=c.isDragging,F=c.startDragging,L=c.getDistance,u=c.isTouchable,v=S.widgetIconHighlight,i=S.widgetIconBorder,O=S.widgetIconGradient,n=function(){return document},B=function(u,J){return u.querySelectorAll(J)},z=function(L){var s=n().createElement(L);return"ul"===L&&(j(s,t,"relative"),j(s,Z,y),j(s,x,y),j(s,"list-style",A),j(s,"box-sizing","border-box"),j(s,"-moz-box-sizing","border-box"),j(s,r,"inline-block"),j(s,"vertical-align","text-bottom"),j(s,"border","1px solid "+c.contextMenuBorderColor),j(s,"box-shadow","0 0 16px 1px "+c.contextMenuShadowColor),j(s,"overflow","hidden"),c.contextMenuBorderRadius&&j(s,"border-radius",c.contextMenuBorderRadius+e)),s},q=function(z){var X=z.touches[0];return X?X:z.changedTouches[0]},H=function(){return z("div")},P=function(){return z("canvas")},j=function(Z,f,Y){Z.style.setProperty(f,Y,Q)},g=function(f,d,v){c.def(k.widget[f],d,v)},b=function(w,q){w.appendChild(q)},Y=function(j,H){j.removeChild(H)},X=J.addEventListener,U=J.removeEventListener;J.addMethod(c,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:i},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:v}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:i},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:v,gradient:c.imageGradient,gradientColor:O,background:v}]},contextMenuLabelFont:(u?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var W=function(g){var P=this,s=g._view;if(P.$11b=g,P.addListeners(),X(s,"contextmenu",function($){$.preventDefault()}),!u){var Z=P.$37b=P.$36b.bind(P);X(s,"mouseover",Z),X(s,"mouseout",Z)}};c.def(W,l,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(b){if(c.preventDefault(b),s(b)){for(var k=this,i=k.$11b,j=k.getView(),Y=j.children,V=0;V<Y.length;V++){var g=Y[V],B=g.$24b,h=g.$25b;if(B&&B.contains(b.target))return i.scrollUp(g),k.$28b=R(function(){k.$29b=E(function(){i.scrollUp(g)},100)},500),F(k,b),void 0;if(h&&h.contains(b.target))return i.scrollDown(g),k.$28b=R(function(){k.$29b=E(function(){i.scrollDown(g)},100)},500),F(k,b),void 0}u&&(b=q(b)),k.$30b={x:b.pageX,y:b.pageY}}},handle_mousedown:function(w){this.handle_touchstart(w)},handle_touchend:function(y){if(s(y)){var H=this,m=H.$30b,_=u?{x:q(y).pageX,y:q(y).pageY}:{x:y.pageX,y:y.pageY};if(!m||L(m,_)>1)return delete H.$30b,void 0;for(var W=H.getView(),w=H.$11b,b=y.target,A=Q,g=Q,f=w._items,K=W.$26b,t=0;t<K.length;t++)if(g=K[t],g.contains(b)){A=g.getAttribute("data-id");break}if(A&&f){var h=w.$17b(f,function(F){return F._id===A});if(h){var B=!1;h.disabled instanceof Function?B=h.disabled.call(w,h):h.disabled===!0&&(B=!0),B||(h.items?u&&H.$36b(g,!0):w.$1b(h,y))}}delete H.$30b}},$36b:function(y,S){if(!p()){var R,l=this,U=l.$11b,L=l.getView(),T=U.$20b||L.children[0],n=U.$19b,v=L.$26b,X=L.children,b=y.target,C=L.getBoundingClientRect(),M=c.getWindowInfo(),t=M.width,r=M.height,q=function(L){for(var x=0;x<X.length;x++){var p=X[x],M=new RegExp(L+"$"),$=p[w];if($&&(M.test($)||$.indexOf(L+" ")>=0))return p}},m=function(H){for(var O=0;O<v.length;O++){var h=v[O],s=new RegExp(H+"$"),J=h[w];if(J&&(s.test(J)||J.indexOf(H+" ")>=0))return h}},H=function(D){var o=m("menu-item"+D.$45b),S=o.getBoundingClientRect(),L=S.top-C.top,w=S.left-C.left;j(D,G,L+e),j(D,V,w+S.width+e);var J=D.getBoundingClientRect(),x=J.top,K=J.left,i=J.height,Z=J.width,z=x+i+2,Q=K+Z+2;z>r&&j(D,G,L+r-z+e),Q>t&&j(D,V,w-Z+e)};if(S)R=y;else{if("mouseover"===y.type){for(var Y=0;Y<v.length;Y++){var k=v[Y];if(k.contains(b)){R=k;break}}if(!R&&n){var _=n.parentNode,i=q("submenu"+n.getAttribute("data-id"));(i&&i.contains(b)||_&&_.contains(b))&&(R=n)}}else if("mouseout"===y.type){for(var P=!1,J=y.relatedTarget,Y=0;Y<X.length;Y++){var $=X[Y];if("hidden"!==$.style.visibility&&$.contains(J)){P=!0;break}}if(P)return}!R&&T&&(R=m("menu-item"+(T.$45b||"NaN")))}if(R!=n){if(n)for(var W=n;W;){if(W[w]=W[w].replace(" menu-item-hover",""),W[w].indexOf("disabled")<0){var x=U.getItemByProperty("_id",W.getAttribute("data-id"));null!=x.background?x.background instanceof Function?j(W,"background-color",x.background.call(U,x)):j(W,"background-color",x.background):j(W,"background-color",c.contextMenuBackground),j(W,"color",c.contextMenuLabelColor)}var s=q("submenu"+W.getAttribute("data-id"));s&&j(s,N,"hidden");var d=W.parentNode;W=m("menu-item"+(d.$45b||"NaN"))}if(R){for(var D=R,f=[];D;){D[w]+=" menu-item-hover",D[w].indexOf("disabled")<0&&(j(D,"background-color",c.contextMenuHoverBackground),j(D,"color",c.contextMenuHoverLabelColor));var B=q("submenu"+D.getAttribute("data-id"));B&&(j(B,N,"visible"),f.push(B));var d=D.parentNode;D=m("menu-item"+(d.$45b||"NaN"))}f.reverse(),f.forEach(function(k){H(k)})}}U.$19b=R,U.$20b=R?R.parentNode:L.children[0]}},handle_mouseup:function(u){this.handle_touchend(u)},handleWindowTouchEnd:function(){var N=this;N.$28b!=Q&&(d(N.$28b),delete N.$28b),N.$29b!=Q&&(m(N.$29b),delete N.$29b),delete N.$34b,delete N.$30b,delete N.$35b},handleWindowMouseUp:function(y){this.handleWindowTouchEnd(y)},handle_mousemove:function(w){this.handle_touchmove(w)},handle_touchmove:function(V){if(!p()&&s(V)){for(var S=this,N=S.getView().children,l=Q,c=0;c<N.length;c++){var G=N[c];if(G.contains(V.target)){l=G;break}}var d=S.$30b,H=u?{x:q(V).pageX,y:q(V).pageY}:{x:V.pageX,y:V.pageY};l&&d&&L(d,H)>2&&(F(S,V),S.$34b=l,S.$35b=l.$18b)}},handleWindowTouchMove:function(Z){Z.preventDefault();var d=this,$=d.$11b,b=d.$34b,J=d.$35b,n=d.$30b;if(n&&b){var Q=u?{x:q(Z).pageX,y:q(Z).pageY}:{x:Z.pageX,y:Z.pageY},A=Q.y-n.y;A>0?$.scrollUp(b,b.$18b-(J-A)):$.scrollDown(b,J-A-b.$18b)}},handleWindowMouseMove:function(J){this.handleWindowTouchMove(J)},$10b:function(W,l){W.preventDefault();for(var B=this,h=B.getView().children,$=Q,z=0;z<h.length;z++){var r=h[z];if(r.contains(W.target)){$=r;break}}if($){var L=this.$11b,m=L.getRowHeight();Math.abs(l)>.05&&(l>0?L.scrollUp($,l*m):0>l&&L.scrollDown($,-l*m))}},handle_mousewheel:function(e){this.$10b(e,e.wheelDelta/40)},handle_DOMMouseScroll:function(I){this.$10b(I,-I.detail)},$44b:function(A){this.getView().contains(A.target)||this.$11b.hide()},$41b:function(U){this.$11b.show(U)},$4b:function(R,u){var h=this.$11b;if(u=u||h._items,u&&u.length&&R.keyCode){var _=[R.keyCode];R.shiftKey&&_.push(16),R.ctrlKey&&_.push(17),R.altKey&&_.push(18),/mac/.test(D.navigator?D.navigator.userAgent.toLowerCase():"")?R.metaKey&&_.push(17):R.metaKey&&_.push(91),_.sort();var E=_.join(),v=h.$17b(u,function(f){if(f.key){var x=f.key.slice(0);return x.sort(),E===x.join()}});if(v){v.preventDefault!==!1&&R.preventDefault();var M=!1;v.disabled instanceof Function?M=v.disabled.call(h,v):v.disabled===!0&&(M=!0),M||h.$1b(v,R)}}},$39b:function(g){var Y=this,d=q(g);Y.$32b={x:d.pageX,y:d.pageY}},$38b:function(c){var Z=this,O=q(c);Z.$31b={x:O.pageX,y:O.pageY},Z.$33b=R(function(){Z.$31b&&(Z.$32b?L(Z.$31b,Z.$32b)<10&&Z.$11b.show(c):Z.$11b.show(c)),delete Z.$33b,delete Z.$31b,delete Z.$32b},600)},$40b:function(){var y=this;y.$33b!=Q&&(d(y.$33b),delete y.$33b,delete y.$31b,delete y.$32b)}}),k.widget.ContextMenu=function(r){var n=this,y=n._view=J.createView(null,n);y[w]="ht-widget-contextmenu",n.setItems(r),n.$13b=new W(n),j(y,"font",c.contextMenuLabelFont),j(y,t,K),j(y,"cursor","default"),j(y,"-webkit-"+C,A),j(y,"-moz-"+C,A),j(y,"-ms-"+C,A),j(y,C,A),j(y,"box-sizing","border-box"),j(y,"-moz-box-sizing","border-box"),c.baseZIndex!=Q&&j(y,"z-index",T(c.baseZIndex)+2+""),n.$3b=function(A){n.$13b.$4b(A)}},g("ContextMenu",l,{$5b:0,_items:Q,$21b:Q,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var w=this,M=w._enableGlobalKey;M===!1&&(X(n(),"keydown",w.$3b),w._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,U(n(),"keydown",this.$3b)},setItems:function(U){this._items=U},getItems:function(){return this._items},setVisibleFunc:function(W){this.$16b=W},setLabelMaxWidth:function(_){this.$43b=_},$1b:function(L,A){var J=this;if("check"===L.type)L.selected=!L.selected;else if("radio"===L.type){var z=L.groupId;J.$17b(J._items,function(F){F.groupId===z&&(F.selected=!1)}),L.selected=!0}if(J.hide(),L.action)L.action.apply(L.scope||J,[L,A]);else if(L.href){var E=L.linkTarget||"_self";D.open(L.href,E)}},getItemById:function(R){return this.getItemByProperty("id",R)},setItemVisible:function(o,q){var P=this.getItemById(o);P&&(P.visible=q)},getItemByProperty:function(W,D,n){var X=this;if(n=n||X._items,!n||0===n.length)return Q;var B=X.$17b(n,function(d){return d[W]===D});return B||Q},scrollUp:function(o,f){var X=this;if(f=f==Q?20:f,f=T(f),0!==f){var b=0;o.$18b>f&&(b=o.$18b-f),X.$42b(o,b),o.scrollTop=b,o.$18b=b}},scrollDown:function(y,p){var M=this;if(p=p==Q?20:p,p=T(p),0!==p){var D=y.$22b,t=y.$23b,r=D-t;t+y.$18b+p<D&&(r=y.$18b+p),M.$42b(y,r),y.scrollTop=r,y.$18b=r}},$42b:function(_,F){F=F==Q?_.$18b:F;var Z=_.$24b,N=_.$25b;Z&&(j(Z,"top",F+e),0==F?j(Z,r,A):j(Z,r,"block")),N&&(j(N,"bottom",-F+e),F==_.$22b-_.$23b?j(N,r,A):j(N,r,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(P,z){for(var T=0;T<P.length;T++){var K=P[T];if(z(K))return K;if(K.items){var B=this.$17b(K.items,z);if(B)return B}}},$2b:function(U,R){for(var g=this,G=0;G<U.length;G++){g.$5b++;var p=U[G];if(p.visible!==!1&&!(c.isFunction(p.visible)&&p.visible()===!1||g.$16b&&!g.$16b.call(g,p))){var D=z("li"),m=g.$5b+"";if(j(D,"white-space","nowrap"),j(D,r,"block"),"separator"===p||p.separator===!0){var F=H();F[w]="separator",j(F,o,c.contextMenuSeparatorWidth+e),j(F,"background",c.contextMenuSeparatorColor),b(D,F)}else{p._id=m,D.setAttribute("data-id",m);var W=z("span"),O=z("span"),L=P(),l=H();if(j(W,r,"inline-block"),j(W,o,"1.2em"),j(O,r,"inline-block"),j(O,o,"1.2em"),j(O,"line-height","1.2em"),L[w]="prefix",j(L,r,"inline-block"),j(L,$,"1em"),j(L,o,"1em"),j(L,"vertical-align","middle"),j(L,Z,"0 0.2em"),"check"===p.type&&p.selected?L[w]+=" check-prefix":"radio"===p.type&&p.selected&&(L[w]+=" radio-prefix"),b(D,L),p.icon){var s=P();s[w]="contextmenu-item-icon",j(s,r,"inline-block"),j(s,o,"1.2em"),j(s,$,"1.2em"),j(s,"margin-right","0.2em"),j(s,"float","left"),s.$50b=p.icon,s._item=p,b(W,s)}if(O[I]=p.label,b(W,O),b(D,W),l[w]="suffix",j(l,r,"inline-block"),j(l,"margin-left","1em"),j(l,"margin-right","0.4em"),j(l,"text-align","right"),j(l,"font-size","75%"),p.items&&(l[I]=c.contextMenuSubmenuMark),p.suffix&&(l[I]=p.suffix),b(D,l),D[w]="menu-item menu-item"+m,null!=p.background?p.background instanceof Function?j(D,"background-color",p.background.call(g,p)):j(D,"background-color",p.background):j(D,"background-color",c.contextMenuBackground),j(D,"color",c.contextMenuLabelColor),j(D,x,"3px 0"),p.disabled instanceof Function){var E=p.disabled.call(g,p);E&&(D[w]+=" disabled",j(D,"color",c.contextMenuDisabledLabelColor))}else p.disabled&&(D[w]+=" disabled",j(D,"color",c.contextMenuDisabledLabelColor));if(p.items){g.$21b||(g.$21b=new k.List);var i=z("ul");i[w]="submenu"+m,i.$45b=m,j(i,N,"hidden"),j(i,t,K),b(g._view,i),g.$21b.add(i),g.$2b(p.items,i)}}b(R,D)}}},rebuild:function(){var F=this,l=F._items,J=F._view;if(J&&(J[I]="",F.$21b=Q,F.$5b=0,F.$19b=Q,F.$20b=Q,J.$26b=Q,l&&0!==l.length)){var w=z("ul",F._r);b(J,w),F.$2b(l,w)}},addTo:function(R){if(R){var k=this,z=k.$13b;if(k.$12b=R,k.$9b=function(E){z.$44b(E)},k.$27b=function(j){z.$41b(j)},u){var s=k.$6b=function(s){z.$38b(s)},x=k.$7b=function(T){z.$39b(T)},n=k.$8b=function(f){z.$40b(f)};X(R,"touchstart",s,!0),X(R,"touchmove",x),X(R,"touchend",n)}else X(R,"contextmenu",k.$27b)}},showOnView:function(P,z,g){P=P.getView?P.getView():P;var p=c.getWindowInfo(),v=P.getBoundingClientRect();this.show(v.left+p.left+z,v.top+p.top+g)},show:function(v,Z,p){var l=this,p=p==Q?!0:!1,s=l._view;if(s){if(l.invalidate(),1===arguments.length){var o=v;if(u){var U=q(o);v=U.pageX,Z=U.pageY}else v=o.pageX,Z=o.pageY}var W=c.getWindowInfo(),J=W.width,L=W.height,f=W.left,R=W.top,d={pageX:v,pageY:Z,clientX:v-f,clientY:Z-R,target:1,originEvent:o},i=d.clientX,A=d.clientY,S=function(k){k.style.height=L-6+e;var E=H(),O=H(),G=function(x){j(x,t,K),j(x,"text-align","center"),j(x,$,"100%"),j(x,"font-size",10+e),j(x,"padding","2px 0"),j(x,"border","0px solid "+c.contextMenuScrollerBorderColor),j(x,"background-color",c.contextMenuScrollerColor1),x.style.backgroundImage="-webkit-linear-gradient(top, "+c.contextMenuScrollerColor1+", "+c.contextMenuScrollerColor2+")",x.style.backgroundImage="linear-gradient(to bottom, "+c.contextMenuScrollerColor1+", "+c.contextMenuScrollerColor2+")"};E[w]="menu-arrow-item menu-arrow-item-top",O[w]="menu-arrow-item menu-arrow-item-bottom",G(E),j(E,"top",y),j(E,"left",y),j(E,"border-bottom-width",1+e),E[I]="▲",G(O),j(O,"bottom",y),j(O,"left",y),j(O,"border-top-width",1+e),O[I]="▼",k.$24b=E,k.$25b=O,k.$18b=k.scrollTop,k.$22b=k.scrollHeight,k.$23b=k.clientHeight,b(k,E),b(k,O),l.$42b(k)};l.beforeShow&&l.beforeShow(d);var N=l._items;if(N&&(o&&o.preventDefault(),N.length)){l.rebuild(),c.appendToScreen(s),s.$26b=B(s,".menu-item");var M=s.children[0];M.offsetHeight>L&&S(M);var k=A+(p?1:0),T=i+(p?1:0),m=function(W){for(var Y=0,S=0,M=0,R=l.$43b;M<W.children.length;M++){var u=W.children[M];if(u.getAttribute("data-id")){var f=u.children[1],h=u.children[2],z=f.children;if(R){var a=z[0];z.length>1&&(a=z[1]),a.offsetWidth>R&&(a[I]="<marquee scrollamount='3'>"+a[I]+"</marquee>",a.children[0].style.verticalAlign="text-bottom",j(a,$,R+e),j(a,r,"inline-block"))}var T=f.offsetWidth,F=h.offsetWidth;T>Y&&(Y=T),F>S&&(S=F)}}for(M=0;M<W.children.length;M++){var u=W.children[M];if(u.getAttribute("data-id")){var f=u.children[1],h=u.children[2],n=f.children[0],o=f.children[1];!o&&n.style.width&&j(n,$,Y+e),j(f,$,Y+e),j(h,$,S+e)}}};m(M);var z=A+3+s.offsetHeight,x=i+3+s.offsetWidth;z>L?j(s,G,k-(z-L)+R+e):j(s,G,k+R+e),x>J?j(s,V,T-(x-J)+f+e):j(s,V,T+f+e);var F=l.$21b;F&&F.each(function(U){m(U),U.offsetHeight>L&&S(U)}),l.$9b&&X(n(),u?"touchstart":"mousedown",l.$9b,!0),l.afterShow&&l.afterShow(d),l.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=Q:!1},getRelatedView:function(){return this.$12b},hide:function(){var m=this,j=m._view;j&&j.parentNode&&(Y(j.parentNode,j),U(n(),u?"touchstart":"mousedown",m.$9b,!0),m.afterHide&&m.afterHide())},dispose:function(){var z=this,q=z.$12b,r=z._view;r&&(r.parentNode&&Y(r.parentNode,r),z.disableGlobalKey(),q&&(u?(U(q,"touchstart",z.$6b,!0),U(q,"touchmove",z.$7b),U(q,"touchend",z.$8b)):U(q,"contextmenu",z.$27b)),z._view=z._items=z.$21b=z.$19b=z.$12b=z.beforeShow=z.afterShow=z.afterHide=z.$9b=z.$3b=z.$6b=z.$7b=z.$8b=z.$27b=Q)},$46b:function(G,y,w,Z,d){var W=J.initContext(G);J.translateAndScale(W,0,0,1),W.clearRect(0,0,w,Z),c.drawStretchImage(W,c.getImage(y),"fill",0,0,w,Z,d,this),W.restore()},$47b:function(){var g,X,W,k=this,A=k._view;if(k.isShowing()){var T=B(A,".check-prefix");for(W=0;W<T.length;W++){var w=T[W];g=w.clientWidth,X=w.clientHeight,w.$48b=g,w.$49b=X,J.setCanvas(w,g,X)}var e=B(A,".radio-prefix");for(W=0;W<e.length;W++){var O=e[W];g=O.clientWidth,X=O.clientHeight,O.$48b=g,O.$49b=X,J.setCanvas(O,g,X)}var U=B(A,".contextmenu-item-icon");for(W=0;W<U.length;W++){var c=U[W];g=c.clientWidth,X=c.clientHeight,c.$48b=g,c.$49b=X,J.setCanvas(c,g,X)}}},validateImpl:function(){var O,N,Y,j=this,R=j._view;if(j.isShowing()){var z=B(R,".check-prefix");for(Y=0;Y<z.length;Y++){var g=z[Y];O=g.$48b,N=g.$49b,O&&N&&j.$46b(g,c.contextMenuCheckIcon,O,N)}var X=B(R,".radio-prefix");for(Y=0;Y<X.length;Y++){var x=X[Y];O=x.$48b,N=x.$49b,O&&N&&j.$46b(x,c.contextMenuRadioIcon,O,N)}var $=B(R,".contextmenu-item-icon");for(Y=0;Y<$.length;Y++){var E=$[Y];O=E.$48b,N=E.$49b,O&&N&&j.$46b(E,c.getImage(E.$50b),O,N,E._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);